# prek hooks for airflow-mcp
# See https://github.com/j178/prek for more information
# To install: uv tool install prek && prek install
# To run manually: prek run --all-files

# Python code formatting with ruff
[[repos]]
repo = "https://github.com/astral-sh/ruff-pre-commit"
rev = "v0.14.14"
hooks = [
  { id = "ruff-check", args = ["--fix", "--exit-non-zero-on-fix"] },
  { id = "ruff-format" },
]

# General file checks
[[repos]]
repo = "builtin"
hooks = [
  { id = "trailing-whitespace" },
  { id = "end-of-file-fixer" },
  { id = "check-yaml" },
  { id = "check-toml" },
  { id = "check-added-large-files", args = ["--maxkb=500"] },
  { id = "check-merge-conflict" },
  { id = "check-case-conflict" },
  { id = "mixed-line-ending", args = ["--fix=lf"] },
]

[[repos]]
repo = "https://github.com/pre-commit/pre-commit-hooks"
rev = "v6.0.0"
hooks = [
  { id = "check-docstring-first" },
]

# Type checking with ty (local hook until official pre-commit support)
[[repos]]
repo = "local"
[[repos.hooks]]
id = "ty"
name = "ty check"
entry = "uv run ty check"
language = "system"
types = ["python"]
pass_filenames = false

# Security checks
[[repos]]
repo = "https://github.com/PyCQA/bandit"
rev = "1.9.3"
[[repos.hooks]]
id = "bandit"
args = ["-c", "pyproject.toml"]
additional_dependencies = ["bandit[toml]"]
exclude = "^tests/"
